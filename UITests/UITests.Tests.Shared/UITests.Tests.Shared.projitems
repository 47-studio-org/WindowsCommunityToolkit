<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <MSBuildAllProjects>$(MSBuildAllProjects);$(MSBuildThisFileFullPath)</MSBuildAllProjects>
    <HasSharedItems>true</HasSharedItems>
    <SharedGUID>1d8b0260-5c17-41da-9c38-1e37441b3925</SharedGUID>
  </PropertyGroup>
  <PropertyGroup Label="Configuration">
    <Import_RootNamespace>UITests.Tests.Shared</Import_RootNamespace>
  </PropertyGroup>

  <Choose>
    <!-- When we're in the test harness include all '*Test.cs' files -->
    <When Condition="'$(IsTestHarness)' == 'true' or '$(IsSharedProject)' == 'true'">
      <ItemGroup>
        <Compile Include="**\*Test.cs" Exclude="**\bin\**\*Test.cs;**\obj\**\*Test.cs"/>
        <!-- Base test helpers -->
        <Compile Include="$(MSBuildThisFileDirectory)UITest.cs" />
        <Compile Include="$(MSBuildThisFileDirectory)TestAssembly.cs" />
        <Compile Include="$(MSBuildThisFileDirectory)TestPageAttribute.cs" />
      </ItemGroup>
    </When>
  </Choose>

  <Choose>
    <!-- When we're in the UI app used by the test harness, include all the pages -->
    <When Condition="'$(IsTestHarness)' != 'true' or '$(IsSharedProject)' == 'true'">
      <ItemGroup>
        <Page Include="**\*Page.xaml" Exclude="**\bin\**\*Page.xaml;**\obj\**\*Page.xaml" SubType="Designer" Generator="MSBuild:Compile" />
        <Compile Include="**\*Page.xaml.cs" DependentUpon="%(Filename)" />
      </ItemGroup>
    </When>
  </Choose>
</Project>