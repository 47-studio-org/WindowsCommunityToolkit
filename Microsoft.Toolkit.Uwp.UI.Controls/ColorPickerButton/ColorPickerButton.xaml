<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:contract7NotPresent="http://schemas.microsoft.com/winfx/2006/xaml/presentation?IsApiContractNotPresent(Windows.Foundation.UniversalApiContract,7)"
                    xmlns:contract7Present="http://schemas.microsoft.com/winfx/2006/xaml/presentation?IsApiContractPresent(Windows.Foundation.UniversalApiContract,7)"
                    xmlns:controls="using:Microsoft.Toolkit.Uwp.UI.Controls"
                    xmlns:localconverters="using:Microsoft.Toolkit.Uwp.UI.Controls.ColorPickerButtonConverters"
                    xmlns:converters="using:Microsoft.Toolkit.Uwp.UI.Converters">

    <!-- The XAML compiler has a serious bug that doesn't allow using conditional XAML on Setters...
         The work-around is to create multiple styles as condition XAML still works at the style level.
         This is needed to support CornerRadius properties. -->

    <Style TargetType="controls:ColorPickerButton"
           x:Key="BaseColorPickerButtonStyle">
        <Setter Property="Height"
                Value="32" />
        <Setter Property="Width"
                Value="64" />
        <Setter Property="MinWidth"
                Value="64" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="controls:ColorPickerButton">
                    <Border CornerRadius="{TemplateBinding CornerRadius}"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch">
                        <Border.Resources>
                            <localconverters:ColorToColorShadeConverter x:Key="ColorToColorShade" />
                            <converters:ColorToDisplayNameConverter x:Key="ColorToDisplayName" />
                            <localconverters:ColorToHexConverter x:Key="ColorToHex" />
                            <localconverters:ContrastBrushConverter x:Key="ContrastBrush" />
                            <SolidColorBrush x:Key="CheckerboardColor0">
                                <SolidColorBrush.Color>
                                    <Color>Transparent</Color>
                                </SolidColorBrush.Color>
                            </SolidColorBrush>
                            <SolidColorBrush x:Key="CheckerboardColor1">
                                <SolidColorBrush.Color>
                                    <Color>#70F5F5F5</Color>
                                </SolidColorBrush.Color>
                            </SolidColorBrush>
                            <SolidColorBrush x:Name="CheckerColorBrush"
                                             Color="{ThemeResource SystemListLowColor}" />
                            <Style x:Key="ColorPickerButtonSliderStyle"
                                   TargetType="controls:ColorPickerButtonSlider">
                                <Setter Property="VerticalAlignment"
                                        Value="Center" />
                                <Setter Property="IsThumbToolTipEnabled"
                                        Value="False" />
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <!-- Based on WinUI version 2.4.2 -->
                                        <ControlTemplate TargetType="controls:ColorPickerButtonSlider">
                                            <Grid Margin="{TemplateBinding Padding}">
                                                <Grid.Resources>
                                                    <Style TargetType="Thumb"
                                                           x:Key="SliderThumbStyle">
                                                        <Setter Property="BorderThickness"
                                                                Value="3" />
                                                        <Setter Property="Background"
                                                                Value="Transparent" />
                                                        <Setter Property="Template">
                                                            <Setter.Value>
                                                                <ControlTemplate TargetType="Thumb">
                                                                    <Border Background="{TemplateBinding Background}"
                                                                            BorderBrush="{TemplateBinding BorderBrush}"
                                                                            BorderThickness="{TemplateBinding BorderThickness}"
                                                                            CornerRadius="{ThemeResource SliderThumbCornerRadius}" />
                                                                </ControlTemplate>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Style>
                                                </Grid.Resources>

                                                <VisualStateManager.VisualStateGroups>
                                                    <VisualStateGroup x:Name="CommonStates">
                                                        <VisualState x:Name="Normal" />

                                                        <!-- The Pressed state is purposely the same as normal.
                                                             This ensures that the thumb always has the correct contrast with 
                                                             the selected color underneath it when dragging or moving. -->
                                                        <VisualState x:Name="Pressed" />

                                                        <VisualState x:Name="Disabled">
                                                            <VisualState.Setters>
                                                                <Setter Target="HorizontalThumb.BorderBrush"
                                                                        Value="{ThemeResource SliderThumbBackgroundDisabled}" />
                                                                <Setter Target="VerticalThumb.BorderBrush"
                                                                        Value="{ThemeResource SliderThumbBackgroundDisabled}" />
                                                                <Setter Target="SliderContainer.Background"
                                                                        Value="{ThemeResource SliderContainerBackgroundDisabled}" />
                                                            </VisualState.Setters>
                                                        </VisualState>

                                                        <VisualState x:Name="PointerOver">
                                                            <VisualState.Setters>
                                                                <Setter Target="HorizontalThumb.BorderBrush"
                                                                        Value="{ThemeResource SliderThumbBackgroundPointerOver}" />
                                                                <Setter Target="VerticalThumb.BorderBrush"
                                                                        Value="{ThemeResource SliderThumbBackgroundPointerOver}" />
                                                                <Setter Target="SliderContainer.Background"
                                                                        Value="{ThemeResource SliderContainerBackgroundPointerOver}" />
                                                            </VisualState.Setters>
                                                        </VisualState>

                                                    </VisualStateGroup>
                                                    <VisualStateGroup x:Name="FocusEngagementStates">
                                                        <VisualState x:Name="FocusDisengaged" />
                                                        <VisualState x:Name="FocusEngagedHorizontal">
                                                            <VisualState.Setters>
                                                                <Setter Target="SliderContainer.(Control.IsTemplateFocusTarget)"
                                                                        Value="False" />
                                                                <Setter Target="HorizontalThumb.(Control.IsTemplateFocusTarget)"
                                                                        Value="True" />
                                                            </VisualState.Setters>
                                                        </VisualState>
                                                        <VisualState x:Name="FocusEngagedVertical">
                                                            <VisualState.Setters>
                                                                <Setter Target="SliderContainer.(Control.IsTemplateFocusTarget)"
                                                                        Value="False" />
                                                                <Setter Target="VerticalThumb.(Control.IsTemplateFocusTarget)"
                                                                        Value="True" />
                                                            </VisualState.Setters>
                                                        </VisualState>

                                                    </VisualStateGroup>

                                                </VisualStateManager.VisualStateGroups>

                                                <Grid x:Name="SliderContainer"
                                                      Background="{ThemeResource SliderContainerBackground}"
                                                      Control.IsTemplateFocusTarget="True">
                                                    <Grid x:Name="HorizontalTemplate"
                                                          MinHeight="20">

                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto" />
                                                            <ColumnDefinition Width="Auto" />
                                                            <ColumnDefinition Width="*" />
                                                        </Grid.ColumnDefinitions>

                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="0" />
                                                            <RowDefinition Height="*" />
                                                            <RowDefinition Height="0" />
                                                        </Grid.RowDefinitions>

                                                        <Rectangle x:Name="HorizontalTrackRect"
                                                                   Fill="{TemplateBinding Background}"
                                                                   Height="20"
                                                                   Grid.Row="1"
                                                                   Grid.ColumnSpan="3"
                                                                   RadiusX="10"
                                                                   RadiusY="10" />
                                                        <Rectangle x:Name="HorizontalDecreaseRect"
                                                                   Fill="Transparent"
                                                                   Grid.Row="1"
                                                                   RadiusX="8"
                                                                   RadiusY="8" />
                                                        <Thumb x:Name="HorizontalThumb"
                                                               Style="{StaticResource SliderThumbStyle}"
                                                               DataContext="{TemplateBinding Value}"
                                                               BorderBrush="{TemplateBinding BorderBrush}"
                                                               Height="20"
                                                               Width="20"
                                                               contract7Present:CornerRadius="10"
                                                               Grid.Row="0"
                                                               Grid.RowSpan="3"
                                                               Grid.Column="1"
                                                               FocusVisualMargin="-14,-6,-14,-6"
                                                               AutomationProperties.AccessibilityView="Raw" />
                                                    </Grid>
                                                    <Grid x:Name="VerticalTemplate"
                                                          MinWidth="20"
                                                          Visibility="Collapsed">

                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="*" />
                                                            <RowDefinition Height="Auto" />
                                                            <RowDefinition Height="Auto" />
                                                        </Grid.RowDefinitions>

                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="0" />
                                                            <ColumnDefinition Width="*" />
                                                            <ColumnDefinition Width="0" />
                                                        </Grid.ColumnDefinitions>

                                                        <Rectangle x:Name="VerticalTrackRect"
                                                                   Fill="{TemplateBinding Background}"
                                                                   Width="20"
                                                                   Grid.Column="1"
                                                                   Grid.RowSpan="3"
                                                                   RadiusX="10"
                                                                   RadiusY="10" />
                                                        <Rectangle x:Name="VerticalDecreaseRect"
                                                                   Fill="Transparent"
                                                                   Grid.Column="1"
                                                                   Grid.Row="2"
                                                                   RadiusX="8"
                                                                   RadiusY="8" />
                                                        <Thumb x:Name="VerticalThumb"
                                                               Style="{StaticResource SliderThumbStyle}"
                                                               DataContext="{TemplateBinding Value}"
                                                               BorderBrush="{TemplateBinding BorderBrush}"
                                                               Height="20"
                                                               Width="20"
                                                               contract7Present:CornerRadius="10"
                                                               Grid.Row="1"
                                                               Grid.Column="0"
                                                               Grid.ColumnSpan="3"
                                                               FocusVisualMargin="-6,-14,-6,-14"
                                                               AutomationProperties.AccessibilityView="Raw" />
                                                    </Grid>
                                                </Grid>
                                            </Grid>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                            <contract7NotPresent:Style TargetType="TextBox"
                                                       x:Key="InputTextBoxStyle">
                                <!-- Currently not used -->
                            </contract7NotPresent:Style>
                            <contract7Present:Style TargetType="TextBox"
                                                    x:Key="InputTextBoxStyle">
                                <Setter Property="CornerRadius"
                                        Value="0,2,2,0" />
                            </contract7Present:Style>
                        </Border.Resources>
                        <VisualStateManager.VisualStateGroups>

                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal" />
                                <VisualState x:Name="Disabled">
                                    <VisualState.Setters>
                                        <Setter Target="RootButton.Background"
                                                Value="{ThemeResource ButtonBackgroundDisabled}" />
                                        <Setter Target="RootButton.BorderBrush"
                                                Value="{ThemeResource ButtonBorderBrushDisabled}" />
                                        <Setter Target="DropDownGlyph.Foreground"
                                                Value="{ThemeResource ButtonForegroundDisabled}" />
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="PointerOver">
                                    <VisualState.Setters>
                                        <Setter Target="RootButton.Background"
                                                Value="{ThemeResource ButtonBackgroundPointerOver}" />
                                        <Setter Target="RootButton.BorderBrush"
                                                Value="{ThemeResource ButtonBorderBrushPointerOver}" />
                                        <Setter Target="DropDownGlyph.Foreground"
                                                Value="{ThemeResource ButtonForegroundPointerOver}" />
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="Pressed">
                                    <VisualState.Setters>
                                        <Setter Target="RootButton.Background"
                                                Value="{ThemeResource ButtonBackgroundPressed}" />
                                        <Setter Target="RootButton.BorderBrush"
                                                Value="{ThemeResource ButtonBorderBrushPressed}" />
                                        <Setter Target="DropDownGlyph.Foreground"
                                                Value="{ThemeResource ButtonForegroundPressed}" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="ColorSpectrumVisibility">
                                <VisualState x:Name="ColorSpectrumVisible" />
                                <VisualState x:Name="ColorSpectrumCollapsed">
                                    <VisualState.Setters>
                                        <Setter Target="SpectrumPivotItem.Visibility"
                                                Value="Collapsed" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="ColorPaletteVisibility">
                                <VisualState x:Name="ColorPaletteVisible" />
                                <VisualState x:Name="ColorPaletteCollapsed">
                                    <VisualState.Setters>
                                        <Setter Target="PalettePivotItem.Visibility"
                                                Value="Collapsed" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="ColorPreviewVisibility">
                                <VisualState x:Name="ColorPreviewVisible" />
                                <VisualState x:Name="ColorPreviewCollapsed">
                                    <VisualState.Setters>
                                        <Setter Target="ColorPreviewGrid.Visibility"
                                                Value="Collapsed" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="PreviousColorVisibility">
                                <!-- Previous color is not currently supported -->
                                <VisualState x:Name="PreviousColorCollapsedVertical" />
                                <VisualState x:Name="PreviousColorVisibleVertical" />
                                <VisualState x:Name="PreviousColorCollapsedHorizontal" />
                                <VisualState x:Name="PreviousColorVisibleHorizontal" />
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="ThirdDimensionSliderVisibility">
                                <VisualState x:Name="ThirdDimensionSliderVisible" />
                                <VisualState x:Name="ThirdDimensionSliderCollapsed">
                                    <VisualState.Setters>
                                        <Setter Target="ColorSpectrumThirdDimensionSlider.Visibility"
                                                Value="Collapsed" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="AlphaSliderVisibility">
                                <VisualState x:Name="AlphaSliderVisible" />
                                <VisualState x:Name="AlphaSliderCollapsed">
                                    <VisualState.Setters>
                                        <Setter Target="ColorSpectrumAlphaSlider.Visibility"
                                                Value="Collapsed" />
                                        <Setter Target="AlphaChannelBorder.Visibility"
                                                Value="Collapsed" />
                                        <Setter Target="AlphaChannelTextBox.Visibility"
                                                Value="Collapsed" />
                                        <Setter Target="AlphaChannelSlider.Visibility"
                                                Value="Collapsed" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="MoreButtonVisibility">
                                <!-- More button isn't supported -->
                                <VisualState x:Name="MoreButtonVisible" />
                                <VisualState x:Name="MoreButtonCollapsed" />
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="TextEntryGridVisibility">
                                <!-- Text entry grid is not currently supported -->
                                <VisualState x:Name="TextEntryGridCollapsed" />
                                <VisualState x:Name="TextEntryGridVisible" />
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="ColorChannelTextInputVisibility">
                                <VisualState x:Name="ColorChannelTextInputVisible" />
                                <VisualState x:Name="ColorChannelTextInputCollapsed">
                                    <VisualState.Setters>
                                        <Setter Target="ChannelsPivotItem.Visibility"
                                                Value="Collapsed" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="AlphaTextInputVisibility">
                                <VisualState x:Name="AlphaTextInputVisible" />
                                <VisualState x:Name="AlphaTextInputCollapsed">
                                    <VisualState.Setters>
                                        <Setter Target="AlphaChannelTextBox.Visibility"
                                                Value="Collapsed" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="ColorRepresentationSelected">
                                <VisualState x:Name="RgbSelected" />
                                <VisualState x:Name="HsvSelected">
                                    <VisualState.Setters>
                                        <Setter Target="Channel1TextBlock.Text"
                                                Value="H" />
                                        <Setter Target="Channel2TextBlock.Text"
                                                Value="S" />
                                        <Setter Target="Channel3TextBlock.Text"
                                                Value="V" />
                                        <Setter Target="Channel1TextBox.(AutomationProperties.Name)"
                                                Value="Hue Channel" />
                                        <Setter Target="Channel2TextBox.(AutomationProperties.Name)"
                                                Value="Saturation Channel" />
                                        <Setter Target="Channel3TextBox.(AutomationProperties.Name)"
                                                Value="Value Channel" />
                                        <Setter Target="Channel1Slider.(AutomationProperties.Name)"
                                                Value="Hue Channel" />
                                        <Setter Target="Channel2Slider.(AutomationProperties.Name)"
                                                Value="Saturation Channel" />
                                        <Setter Target="Channel3Slider.(AutomationProperties.Name)"
                                                Value="Value Channel" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="HexInputVisibility">
                                <VisualState x:Name="HexInputVisible" />
                                <VisualState x:Name="HexInputCollapsed">
                                    <VisualState.Setters>
                                        <Setter Target="HexInputGrid.Visibility"
                                                Value="Collapsed" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="AlphaEnabledState">
                                <!-- Not currently supported -->
                                <VisualState x:Name="AlphaDisabled">
                                    <VisualState.Setters>
                                        <Setter Target="ColorSpectrumAlphaSlider.Visibility"
                                                Value="Collapsed" />
                                        <Setter Target="AlphaChannelBorder.Visibility"
                                                Value="Collapsed" />
                                        <Setter Target="AlphaChannelTextBox.Visibility"
                                                Value="Collapsed" />
                                        <Setter Target="AlphaChannelSlider.Visibility"
                                                Value="Collapsed" />
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="AlphaEnabled" />
                            </VisualStateGroup>

                        </VisualStateManager.VisualStateGroups>
                        <!-- Must not use layout rounding or the color may not be
                             correctly centered in the button -->
                        <Button x:Name="RootButton"
                                Height="{TemplateBinding Height}"
                                Width="{TemplateBinding Width}"
                                Padding="0"
                                UseLayoutRounding="False"
                                HorizontalContentAlignment="Stretch"
                                VerticalContentAlignment="Stretch">
                            <Button.Content>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="32" />
                                    </Grid.ColumnDefinitions>
                                    <!-- Checkered background to show transparency -->
                                    <Border x:Name="CheckeredBackground1Border"
                                            Grid.Column="0"
                                            HorizontalAlignment="Stretch"
                                            VerticalAlignment="Stretch" />
                                    <!-- Preview color -->
                                    <Border Grid.Column="0"
                                            CornerRadius="2,0,0,2"
                                            HorizontalAlignment="Stretch"
                                            VerticalAlignment="Stretch">
                                        <Border.Background>
                                            <SolidColorBrush Color="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Color}" />
                                        </Border.Background>
                                    </Border>
                                    <!-- Drop down symbol, ensure this matches in style with DropDownButton/ComboBox -->
                                    <FontIcon x:Name="DropDownGlyph"
                                              Grid.Column="1"
                                              IsHitTestVisible="False"
                                              Foreground="{ThemeResource ComboBoxDropDownGlyphForeground}"
                                              FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                              FontSize="12"
                                              Glyph="&#xE0E5;"
                                              HorizontalAlignment="Center"
                                              VerticalAlignment="Center" />
                                </Grid>
                            </Button.Content>
                            <Button.Flyout>
                                <Flyout>
                                    <!-- The Grid removes the Flyout padding using negative margins.
                                         This is better than restyling the FlyoutPresenter because there is no key for using
                                         a new style based on the existing one. That would require entirely re-styling the 
                                         FlyoutPresenter which would soon be out of sync with the system. -->
                                    <Grid Margin="-12,-11,-12,-12">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="*" />
                                            <RowDefinition Height="Auto" />
                                        </Grid.RowDefinitions>
                                        <!-- The whole background of the pivot header is changed here.
                                             It's much easier to do this than customize the PivotHeaderItem template.
                                             Remember PivotHeaderItem has a default height of 48px. -->
                                        <Grid Grid.Row="0"
                                              CornerRadius="4,4,0,0"
                                              Height="48"
                                              Background="{ThemeResource SystemControlAcrylicElementBrush}"
                                              HorizontalAlignment="Stretch">
                                        </Grid>
                                        <Pivot Grid.Row="0"
                                               Grid.RowSpan="2"
                                               Height="400"
                                               Width="400">
                                            <Pivot.ItemContainerStyle>
                                                <Style TargetType="PivotItem">
                                                    <Setter Property="HorizontalContentAlignment"
                                                            Value="Stretch" />
                                                    <Setter Property="VerticalContentAlignment"
                                                            Value="Stretch" />
                                                    <Setter Property="Margin"
                                                            Value="12" />
                                                    <Setter Property="Padding"
                                                            Value="0" />
                                                </Style>
                                            </Pivot.ItemContainerStyle>
                                            <PivotItem x:Name="SpectrumPivotItem"
                                                       AutomationProperties.Name="Spectrum">
                                                <PivotItem.Header>
                                                    <FontIcon Glyph="&#xE76D;"
                                                              Width="109" />
                                                </PivotItem.Header>
                                                <PivotItem.Content>
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto" />
                                                            <ColumnDefinition Width="*" />
                                                            <ColumnDefinition Width="Auto" />
                                                        </Grid.ColumnDefinitions>
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="Auto" />
                                                            <RowDefinition Height="*" />
                                                        </Grid.RowDefinitions>
                                                        <controls:ColorPickerButtonSlider x:Name="ColorSpectrumThirdDimensionSlider"
                                                                                          Grid.Column="0"
                                                                                          Grid.Row="1"
                                                                                          Grid.RowSpan="2"
                                                                                          Style="{StaticResource ColorPickerButtonSliderStyle}"
                                                                                          BorderBrush="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Color, Converter={StaticResource ContrastBrush}, ConverterParameter={ThemeResource TextControlForeground}}"
                                                                                          Orientation="Vertical"
                                                                                          Width="20"
                                                                                          HorizontalAlignment="Center"
                                                                                          VerticalAlignment="Stretch"
                                                                                          Margin="0,0,12,0" />
                                                        <!-- Keep in mind the spectrum is always HSV -->
                                                        <ColorSpectrum x:Name="ColorSpectrum"
                                                                       AutomationProperties.Name="Third Dimension"
                                                                       Grid.Column="1"
                                                                       Grid.Row="0"
                                                                       Grid.RowSpan="2"
                                                                       Components="{TemplateBinding ColorSpectrumComponents}"
                                                                       MinHue="{TemplateBinding MinHue}"
                                                                       MaxHue="{TemplateBinding MaxHue}"
                                                                       MinSaturation="{TemplateBinding MinSaturation}"
                                                                       MaxSaturation="{TemplateBinding MaxSaturation}"
                                                                       MinValue="{TemplateBinding MinValue}"
                                                                       MaxValue="{TemplateBinding MaxValue}"
                                                                       Shape="{TemplateBinding ColorSpectrumShape}"
                                                                       HorizontalAlignment="Stretch"
                                                                       VerticalAlignment="Stretch" />
                                                        <controls:ColorPickerButtonSlider x:Name="ColorSpectrumAlphaSlider"
                                                                                          AutomationProperties.Name="Alpha Channel"
                                                                                          Grid.Column="2"
                                                                                          Grid.Row="1"
                                                                                          Grid.RowSpan="2"
                                                                                          Style="{StaticResource ColorPickerButtonSliderStyle}"
                                                                                          BorderBrush="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Color, Converter={StaticResource ContrastBrush}, ConverterParameter={ThemeResource TextControlForeground}}"
                                                                                          Orientation="Vertical"
                                                                                          Width="20"
                                                                                          HorizontalAlignment="Center"
                                                                                          VerticalAlignment="Stretch"
                                                                                          Margin="12,0,0,0" />
                                                    </Grid>
                                                </PivotItem.Content>
                                            </PivotItem>
                                            <PivotItem x:Name="PalettePivotItem"
                                                       AutomationProperties.Name="Palette">
                                                <PivotItem.Header>
                                                    <FontIcon Glyph="&#xE790;"
                                                              Width="109" />
                                                </PivotItem.Header>
                                                <PivotItem.Content>
                                                    <GridView x:Name="PaletteGridView"
                                                              SelectionMode="Single"
                                                              SelectedValue="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Color, Mode=TwoWay}"
                                                              ItemsSource="{TemplateBinding CustomPaletteColors}"
                                                              Margin="0"
                                                              Padding="0"
                                                              Tag="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Color, Mode=OneWay}">
                                                        <GridView.ItemsPanel>
                                                            <ItemsPanelTemplate>
                                                                <!-- Would be nice if RelativeSource could find an ancestor of type GridView... like WPF.
                                                                     This would allow binding the Columns property here instead of in code-behind. -->
                                                                <controls:UniformGrid />
                                                            </ItemsPanelTemplate>
                                                        </GridView.ItemsPanel>
                                                        <GridView.ItemContainerStyle>
                                                            <Style TargetType="GridViewItem">
                                                                <Setter Property="FontFamily"
                                                                        Value="{ThemeResource ContentControlThemeFontFamily}" />
                                                                <Setter Property="FontSize"
                                                                        Value="{ThemeResource ControlContentThemeFontSize}" />
                                                                <Setter Property="Background"
                                                                        Value="Transparent" />
                                                                <Setter Property="Foreground"
                                                                        Value="{ThemeResource SystemControlForegroundBaseHighBrush}" />
                                                                <Setter Property="TabNavigation"
                                                                        Value="Local" />
                                                                <Setter Property="IsHoldingEnabled"
                                                                        Value="True" />
                                                                <Setter Property="HorizontalContentAlignment"
                                                                        Value="Stretch" />
                                                                <Setter Property="VerticalContentAlignment"
                                                                        Value="Stretch" />
                                                                <Setter Property="Margin"
                                                                        Value="0" />
                                                                <Setter Property="Padding"
                                                                        Value="0" />
                                                                <Setter Property="MinWidth"
                                                                        Value="10" />
                                                                <Setter Property="MinHeight"
                                                                        Value="10" />
                                                                <Setter Property="AllowDrop"
                                                                        Value="False" />
                                                                <Setter Property="UseSystemFocusVisuals"
                                                                        Value="{StaticResource UseSystemFocusVisuals}" />
                                                                <Setter Property="FocusVisualMargin"
                                                                        Value="-2" />
                                                                <Setter Property="Template">
                                                                    <Setter.Value>
                                                                        <ControlTemplate TargetType="GridViewItem">
                                                                            <Grid x:Name="ContentBorder"
                                                                                  Control.IsTemplateFocusTarget="True"
                                                                                  FocusVisualMargin="{TemplateBinding FocusVisualMargin}"
                                                                                  Background="{TemplateBinding Background}"
                                                                                  BorderBrush="{TemplateBinding BorderBrush}"
                                                                                  BorderThickness="{TemplateBinding BorderThickness}"
                                                                                  CornerRadius="{TemplateBinding CornerRadius}"
                                                                                  RenderTransformOrigin="0.5,0.5">

                                                                                <Grid.RenderTransform>
                                                                                    <ScaleTransform x:Name="ContentBorderScale" />
                                                                                </Grid.RenderTransform>

                                                                                <VisualStateManager.VisualStateGroups>
                                                                                    <VisualStateGroup x:Name="FocusStates">
                                                                                        <VisualState x:Name="Focused">

                                                                                            <Storyboard>
                                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BorderRectangle"
                                                                                                                               Storyboard.TargetProperty="Visibility">
                                                                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                                            Value="Collapsed" />
                                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                            </Storyboard>
                                                                                        </VisualState>
                                                                                        <VisualState x:Name="Unfocused" />

                                                                                    </VisualStateGroup>
                                                                                    <VisualStateGroup x:Name="CommonStates">
                                                                                        <VisualState x:Name="Normal">

                                                                                            <Storyboard>
                                                                                                <PointerUpThemeAnimation Storyboard.TargetName="ContentPresenter" />
                                                                                            </Storyboard>
                                                                                        </VisualState>

                                                                                        <VisualState x:Name="PointerOver">

                                                                                            <Storyboard>
                                                                                                <DoubleAnimation Storyboard.TargetName="BorderRectangle"
                                                                                                                 Storyboard.TargetProperty="Opacity"
                                                                                                                 Duration="0"
                                                                                                                 To="1" />
                                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BorderRectangle"
                                                                                                                               Storyboard.TargetProperty="Stroke">
                                                                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                                            Value="{ThemeResource SystemControlHighlightListLowBrush}" />
                                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
                                                                                                                               Storyboard.TargetProperty="Foreground">
                                                                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                                            Value="{ThemeResource SystemControlForegroundBaseHighBrush}" />
                                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentBorder"
                                                                                                                               Storyboard.TargetProperty="FocusVisualSecondaryBrush">
                                                                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                                            Value="{ThemeResource SystemControlHighlightListLowBrush}" />
                                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentBorder"
                                                                                                                               Storyboard.TargetProperty="FocusVisualSecondaryThickness">
                                                                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                                            Value="2" />
                                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                                <PointerUpThemeAnimation Storyboard.TargetName="ContentPresenter" />
                                                                                            </Storyboard>
                                                                                        </VisualState>

                                                                                        <VisualState x:Name="Pressed">

                                                                                            <Storyboard>
                                                                                                <DoubleAnimation Storyboard.TargetName="BorderRectangle"
                                                                                                                 Storyboard.TargetProperty="Opacity"
                                                                                                                 Duration="0"
                                                                                                                 To="1" />
                                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BorderRectangle"
                                                                                                                               Storyboard.TargetProperty="Stroke">
                                                                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                                            Value="{ThemeResource SystemControlHighlightListMediumBrush}" />
                                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
                                                                                                                               Storyboard.TargetProperty="Foreground">
                                                                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                                            Value="{ThemeResource SystemControlForegroundBaseHighBrush}" />
                                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentBorder"
                                                                                                                               Storyboard.TargetProperty="FocusVisualSecondaryBrush">
                                                                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                                            Value="{ThemeResource SystemControlHighlightListMediumBrush}" />
                                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentBorder"
                                                                                                                               Storyboard.TargetProperty="FocusVisualSecondaryThickness">
                                                                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                                            Value="2" />
                                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                                <PointerDownThemeAnimation TargetName="ContentPresenter" />
                                                                                            </Storyboard>
                                                                                        </VisualState>

                                                                                        <VisualState x:Name="Selected">

                                                                                            <Storyboard>
                                                                                                <DoubleAnimation Storyboard.TargetName="MultiSelectCheck"
                                                                                                                 Storyboard.TargetProperty="Opacity"
                                                                                                                 Duration="0"
                                                                                                                 To="1" />
                                                                                                <DoubleAnimation Storyboard.TargetName="BorderRectangle"
                                                                                                                 Storyboard.TargetProperty="Opacity"
                                                                                                                 Duration="0"
                                                                                                                 To="1" />
                                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BorderRectangle"
                                                                                                                               Storyboard.TargetProperty="Stroke">
                                                                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                                            Value="{Binding Converter={StaticResource ContrastBrush}, ConverterParameter={ThemeResource TextControlForeground}}" />
                                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
                                                                                                                               Storyboard.TargetProperty="Foreground">
                                                                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                                            Value="{ThemeResource SystemControlForegroundBaseHighBrush}" />
                                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentBorder"
                                                                                                                               Storyboard.TargetProperty="FocusVisualSecondaryBrush">
                                                                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                                            Value="{Binding Converter={StaticResource ContrastBrush}, ConverterParameter={ThemeResource TextControlForeground}}" />
                                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentBorder"
                                                                                                                               Storyboard.TargetProperty="FocusVisualSecondaryThickness">
                                                                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                                            Value="2" />
                                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectSquare"
                                                                                                                               Storyboard.TargetProperty="Background">
                                                                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                                            Value="{Binding Converter={StaticResource ContrastBrush}, ConverterParameter={ThemeResource TextControlForeground}}" />
                                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                                <PointerUpThemeAnimation Storyboard.TargetName="ContentPresenter" />
                                                                                            </Storyboard>
                                                                                        </VisualState>

                                                                                        <VisualState x:Name="PointerOverSelected">

                                                                                            <Storyboard>
                                                                                                <DoubleAnimation Storyboard.TargetName="MultiSelectCheck"
                                                                                                                 Storyboard.TargetProperty="Opacity"
                                                                                                                 Duration="0"
                                                                                                                 To="1" />
                                                                                                <DoubleAnimation Storyboard.TargetName="BorderRectangle"
                                                                                                                 Storyboard.TargetProperty="Opacity"
                                                                                                                 Duration="0"
                                                                                                                 To="1" />
                                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BorderRectangle"
                                                                                                                               Storyboard.TargetProperty="Stroke">
                                                                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                                            Value="{Binding Converter={StaticResource ContrastBrush}, ConverterParameter={ThemeResource TextControlForeground}}" />
                                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
                                                                                                                               Storyboard.TargetProperty="Foreground">
                                                                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                                            Value="{ThemeResource SystemControlForegroundBaseHighBrush}" />
                                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentBorder"
                                                                                                                               Storyboard.TargetProperty="FocusVisualSecondaryBrush">
                                                                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                                            Value="{Binding Converter={StaticResource ContrastBrush}, ConverterParameter={ThemeResource TextControlForeground}}" />
                                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentBorder"
                                                                                                                               Storyboard.TargetProperty="FocusVisualSecondaryThickness">
                                                                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                                            Value="2" />
                                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectSquare"
                                                                                                                               Storyboard.TargetProperty="Background">
                                                                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                                            Value="{Binding Converter={StaticResource ContrastBrush}, ConverterParameter={ThemeResource TextControlForeground}}" />
                                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                                <PointerUpThemeAnimation Storyboard.TargetName="ContentPresenter" />
                                                                                            </Storyboard>
                                                                                        </VisualState>

                                                                                        <VisualState x:Name="PressedSelected">

                                                                                            <Storyboard>
                                                                                                <DoubleAnimation Storyboard.TargetName="MultiSelectCheck"
                                                                                                                 Storyboard.TargetProperty="Opacity"
                                                                                                                 Duration="0"
                                                                                                                 To="1" />
                                                                                                <DoubleAnimation Storyboard.TargetName="BorderRectangle"
                                                                                                                 Storyboard.TargetProperty="Opacity"
                                                                                                                 Duration="0"
                                                                                                                 To="1" />
                                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BorderRectangle"
                                                                                                                               Storyboard.TargetProperty="Stroke">
                                                                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                                            Value="{ThemeResource SystemControlHighlightListAccentHighBrush}" />
                                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
                                                                                                                               Storyboard.TargetProperty="Foreground">
                                                                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                                            Value="{ThemeResource SystemControlForegroundBaseHighBrush}" />
                                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentBorder"
                                                                                                                               Storyboard.TargetProperty="FocusVisualSecondaryBrush">
                                                                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                                            Value="{ThemeResource SystemControlHighlightListAccentHighBrush}" />
                                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentBorder"
                                                                                                                               Storyboard.TargetProperty="FocusVisualSecondaryThickness">
                                                                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                                            Value="2" />
                                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectSquare"
                                                                                                                               Storyboard.TargetProperty="Background">
                                                                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                                            Value="{ThemeResource SystemControlHighlightAccentBrush}" />
                                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                                <PointerDownThemeAnimation TargetName="ContentPresenter" />
                                                                                            </Storyboard>
                                                                                        </VisualState>

                                                                                    </VisualStateGroup>

                                                                                    <VisualStateGroup x:Name="DisabledStates">
                                                                                        <VisualState x:Name="Enabled" />

                                                                                        <VisualState x:Name="Disabled">

                                                                                            <Storyboard>
                                                                                                <DoubleAnimation Storyboard.TargetName="ContentBorder"
                                                                                                                 Storyboard.TargetProperty="Opacity"
                                                                                                                 Duration="0"
                                                                                                                 To="{ThemeResource ListViewItemDisabledThemeOpacity}" />
                                                                                            </Storyboard>
                                                                                        </VisualState>

                                                                                    </VisualStateGroup>

                                                                                    <VisualStateGroup x:Name="MultiSelectStates">
                                                                                        <VisualState x:Name="MultiSelectDisabled">

                                                                                            <Storyboard>
                                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectSquare"
                                                                                                                               Storyboard.TargetProperty="Visibility">
                                                                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                                            Value="Visible" />
                                                                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0.333"
                                                                                                                            Value="Collapsed" />
                                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                                <FadeOutThemeAnimation TargetName="MultiSelectSquare" />
                                                                                            </Storyboard>
                                                                                        </VisualState>

                                                                                        <VisualState x:Name="MultiSelectEnabled">

                                                                                            <Storyboard>
                                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectSquare"
                                                                                                                               Storyboard.TargetProperty="Visibility">
                                                                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                                            Value="Visible" />
                                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                                <FadeInThemeAnimation TargetName="MultiSelectSquare" />
                                                                                            </Storyboard>
                                                                                        </VisualState>

                                                                                    </VisualStateGroup>

                                                                                    <VisualStateGroup x:Name="DataVirtualizationStates">
                                                                                        <VisualState x:Name="DataAvailable" />

                                                                                        <VisualState x:Name="DataPlaceholder">

                                                                                            <Storyboard>
                                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PlaceholderTextBlock"
                                                                                                                               Storyboard.TargetProperty="Visibility">
                                                                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                                            Value="Visible" />
                                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PlaceholderRect"
                                                                                                                               Storyboard.TargetProperty="Visibility">
                                                                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                                            Value="Visible" />
                                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                            </Storyboard>
                                                                                        </VisualState>

                                                                                    </VisualStateGroup>

                                                                                    <VisualStateGroup x:Name="ReorderHintStates">
                                                                                        <VisualState x:Name="NoReorderHint" />

                                                                                        <VisualState x:Name="BottomReorderHint">

                                                                                            <Storyboard>
                                                                                                <DragOverThemeAnimation TargetName="ContentBorder"
                                                                                                                        ToOffset="{ThemeResource GridViewItemReorderHintThemeOffset}"
                                                                                                                        Direction="Bottom" />
                                                                                            </Storyboard>
                                                                                        </VisualState>

                                                                                        <VisualState x:Name="TopReorderHint">

                                                                                            <Storyboard>
                                                                                                <DragOverThemeAnimation TargetName="ContentBorder"
                                                                                                                        ToOffset="{ThemeResource GridViewItemReorderHintThemeOffset}"
                                                                                                                        Direction="Top" />
                                                                                            </Storyboard>
                                                                                        </VisualState>

                                                                                        <VisualState x:Name="RightReorderHint">

                                                                                            <Storyboard>
                                                                                                <DragOverThemeAnimation TargetName="ContentBorder"
                                                                                                                        ToOffset="{ThemeResource GridViewItemReorderHintThemeOffset}"
                                                                                                                        Direction="Right" />
                                                                                            </Storyboard>
                                                                                        </VisualState>

                                                                                        <VisualState x:Name="LeftReorderHint">

                                                                                            <Storyboard>
                                                                                                <DragOverThemeAnimation TargetName="ContentBorder"
                                                                                                                        ToOffset="{ThemeResource GridViewItemReorderHintThemeOffset}"
                                                                                                                        Direction="Left" />
                                                                                            </Storyboard>
                                                                                        </VisualState>

                                                                                        <VisualStateGroup.Transitions>
                                                                                            <VisualTransition To="NoReorderHint"
                                                                                                              GeneratedDuration="0:0:0.2" />
                                                                                        </VisualStateGroup.Transitions>

                                                                                    </VisualStateGroup>

                                                                                    <VisualStateGroup x:Name="DragStates">
                                                                                        <VisualState x:Name="NotDragging" />

                                                                                        <VisualState x:Name="Dragging">

                                                                                            <Storyboard>
                                                                                                <DoubleAnimation Storyboard.TargetName="ContentBorder"
                                                                                                                 Storyboard.TargetProperty="Opacity"
                                                                                                                 Duration="0"
                                                                                                                 To="{ThemeResource ListViewItemDragThemeOpacity}" />
                                                                                                <DragItemThemeAnimation TargetName="ContentBorder" />
                                                                                            </Storyboard>
                                                                                        </VisualState>

                                                                                        <VisualState x:Name="DraggingTarget" />

                                                                                        <VisualState x:Name="MultipleDraggingPrimary">

                                                                                            <Storyboard>
                                                                                                <!-- These two Opacity animations are required - the FadeInThemeAnimations
                                                                                                     on the same elements animate an internal Opacity. -->
                                                                                                <DoubleAnimation Storyboard.TargetName="MultiArrangeOverlayText"
                                                                                                                 Storyboard.TargetProperty="Opacity"
                                                                                                                 Duration="0"
                                                                                                                 To="1" />
                                                                                                <DoubleAnimation Storyboard.TargetName="MultiArrangeOverlayTextBorder"
                                                                                                                 Storyboard.TargetProperty="Opacity"
                                                                                                                 Duration="0"
                                                                                                                 To="1" />
                                                                                                <DoubleAnimation Storyboard.TargetName="MultiSelectSquare"
                                                                                                                 Storyboard.TargetProperty="Opacity"
                                                                                                                 Duration="0"
                                                                                                                 To="0" />
                                                                                                <DoubleAnimation Storyboard.TargetName="MultiSelectCheck"
                                                                                                                 Storyboard.TargetProperty="Opacity"
                                                                                                                 Duration="0"
                                                                                                                 To="0" />
                                                                                                <DoubleAnimation Storyboard.TargetName="ContentBorder"
                                                                                                                 Storyboard.TargetProperty="Opacity"
                                                                                                                 Duration="0"
                                                                                                                 To="{ThemeResource ListViewItemDragThemeOpacity}" />
                                                                                                <FadeInThemeAnimation TargetName="MultiArrangeOverlayText" />
                                                                                                <FadeInThemeAnimation TargetName="MultiArrangeOverlayTextBorder" />
                                                                                                <DragItemThemeAnimation TargetName="ContentBorder" />
                                                                                            </Storyboard>
                                                                                        </VisualState>

                                                                                        <VisualState x:Name="MultipleDraggingSecondary" />

                                                                                        <VisualState x:Name="DraggedPlaceholder" />

                                                                                        <VisualState x:Name="Reordering">

                                                                                            <Storyboard>
                                                                                                <DoubleAnimation Storyboard.TargetName="ContentBorder"
                                                                                                                 Storyboard.TargetProperty="Opacity"
                                                                                                                 Duration="0:0:0.240"
                                                                                                                 To="{ThemeResource ListViewItemReorderThemeOpacity}" />
                                                                                            </Storyboard>
                                                                                        </VisualState>

                                                                                        <VisualState x:Name="ReorderingTarget">

                                                                                            <Storyboard>
                                                                                                <DoubleAnimation Storyboard.TargetName="ContentBorder"
                                                                                                                 Storyboard.TargetProperty="Opacity"
                                                                                                                 Duration="0:0:0.240"
                                                                                                                 To="{ThemeResource ListViewItemReorderTargetThemeOpacity}" />
                                                                                                <DoubleAnimation Storyboard.TargetName="ContentBorderScale"
                                                                                                                 Storyboard.TargetProperty="ScaleX"
                                                                                                                 Duration="0:0:0.240"
                                                                                                                 To="{ThemeResource ListViewItemReorderTargetThemeScale}" />
                                                                                                <DoubleAnimation Storyboard.TargetName="ContentBorderScale"
                                                                                                                 Storyboard.TargetProperty="ScaleY"
                                                                                                                 Duration="0:0:0.240"
                                                                                                                 To="{ThemeResource ListViewItemReorderTargetThemeScale}" />
                                                                                            </Storyboard>
                                                                                        </VisualState>

                                                                                        <VisualState x:Name="MultipleReorderingPrimary">

                                                                                            <Storyboard>
                                                                                                <!-- These two Opacity animations are required - the FadeInThemeAnimations
                                                                                                     on the same elements animate an internal Opacity. -->
                                                                                                <DoubleAnimation Storyboard.TargetName="MultiArrangeOverlayText"
                                                                                                                 Storyboard.TargetProperty="Opacity"
                                                                                                                 Duration="0"
                                                                                                                 To="1" />
                                                                                                <DoubleAnimation Storyboard.TargetName="MultiArrangeOverlayTextBorder"
                                                                                                                 Storyboard.TargetProperty="Opacity"
                                                                                                                 Duration="0"
                                                                                                                 To="1" />
                                                                                                <DoubleAnimation Storyboard.TargetName="MultiSelectSquare"
                                                                                                                 Storyboard.TargetProperty="Opacity"
                                                                                                                 Duration="0"
                                                                                                                 To="0" />
                                                                                                <DoubleAnimation Storyboard.TargetName="MultiSelectCheck"
                                                                                                                 Storyboard.TargetProperty="Opacity"
                                                                                                                 Duration="0"
                                                                                                                 To="0" />
                                                                                                <DoubleAnimation Storyboard.TargetName="ContentBorder"
                                                                                                                 Storyboard.TargetProperty="Opacity"
                                                                                                                 Duration="0:0:0.240"
                                                                                                                 To="{ThemeResource ListViewItemDragThemeOpacity}" />
                                                                                                <FadeInThemeAnimation TargetName="MultiArrangeOverlayText" />
                                                                                                <FadeInThemeAnimation TargetName="MultiArrangeOverlayTextBorder" />
                                                                                            </Storyboard>
                                                                                        </VisualState>

                                                                                        <VisualState x:Name="ReorderedPlaceholder">

                                                                                            <Storyboard>
                                                                                                <FadeOutThemeAnimation TargetName="ContentBorder" />
                                                                                            </Storyboard>
                                                                                        </VisualState>

                                                                                        <VisualState x:Name="DragOver">

                                                                                            <Storyboard>
                                                                                                <DropTargetItemThemeAnimation TargetName="ContentBorder" />
                                                                                            </Storyboard>
                                                                                        </VisualState>

                                                                                        <VisualStateGroup.Transitions>
                                                                                            <VisualTransition To="NotDragging"
                                                                                                              GeneratedDuration="0:0:0.2" />
                                                                                        </VisualStateGroup.Transitions>

                                                                                    </VisualStateGroup>

                                                                                </VisualStateManager.VisualStateGroups>
                                                                                <ContentPresenter x:Name="ContentPresenter"
                                                                                                  ContentTransitions="{TemplateBinding ContentTransitions}"
                                                                                                  HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                                                                  VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                                                                  Margin="{TemplateBinding Padding}" />
                                                                                <!-- The 'Xg' text simulates the amount of space one line of text will occupy.
                                                                                     In the DataPlaceholder state, the Content is not loaded yet so we
                                                                                     approximate the size of the item using placeholder text. -->
                                                                                <TextBlock x:Name="PlaceholderTextBlock"
                                                                                           Visibility="Collapsed"
                                                                                           Text="Xg"
                                                                                           Foreground="{x:Null}"
                                                                                           Margin="{TemplateBinding Padding}"
                                                                                           IsHitTestVisible="False"
                                                                                           AutomationProperties.AccessibilityView="Raw" />
                                                                                <Rectangle x:Name="PlaceholderRect"
                                                                                           Visibility="Collapsed"
                                                                                           Fill="{ThemeResource ListViewItemPlaceholderBackground}" />
                                                                                <Rectangle x:Name="BorderRectangle"
                                                                                           IsHitTestVisible="False"
                                                                                           Stroke="{ThemeResource SystemControlHighlightListAccentLowBrush}"
                                                                                           StrokeThickness="2"
                                                                                           Opacity="0" />
                                                                                <Border x:Name="MultiSelectSquare"
                                                                                        Background="{ThemeResource SystemControlBackgroundChromeMediumBrush}"
                                                                                        Width="20"
                                                                                        Height="20"
                                                                                        Margin="0,2,2,0"
                                                                                        VerticalAlignment="Top"
                                                                                        HorizontalAlignment="Right"
                                                                                        Visibility="Collapsed">
                                                                                    <FontIcon x:Name="MultiSelectCheck"
                                                                                              FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                                                                              Glyph="&#xE73E;"
                                                                                              FontSize="16"
                                                                                              Foreground="{ThemeResource SystemControlForegroundBaseMediumHighBrush}"
                                                                                              Opacity="0" />
                                                                                </Border>
                                                                                <Border x:Name="MultiArrangeOverlayTextBorder"
                                                                                        Opacity="0"
                                                                                        IsHitTestVisible="False"
                                                                                        MinWidth="20"
                                                                                        Height="20"
                                                                                        VerticalAlignment="Center"
                                                                                        HorizontalAlignment="Center"
                                                                                        Background="{ThemeResource SystemControlBackgroundAccentBrush}"
                                                                                        BorderThickness="2"
                                                                                        BorderBrush="{ThemeResource SystemControlBackgroundChromeWhiteBrush}">
                                                                                    <TextBlock x:Name="MultiArrangeOverlayText"
                                                                                               Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.DragItemsCount}"
                                                                                               Style="{ThemeResource CaptionTextBlockStyle}"
                                                                                               IsHitTestVisible="False"
                                                                                               Opacity="0"
                                                                                               VerticalAlignment="Center"
                                                                                               HorizontalAlignment="Center"
                                                                                               AutomationProperties.AccessibilityView="Raw" />
                                                                                </Border>

                                                                            </Grid>

                                                                        </ControlTemplate>
                                                                    </Setter.Value>
                                                                </Setter>
                                                            </Style>
                                                        </GridView.ItemContainerStyle>
                                                        <GridView.ItemTemplate>
                                                            <DataTemplate>
                                                                <Border AutomationProperties.Name="{Binding Converter={StaticResource ColorToDisplayName}}"
                                                                        HorizontalAlignment="Stretch"
                                                                        VerticalAlignment="Stretch">
                                                                    <Border.Background>
                                                                        <SolidColorBrush Color="{Binding}" />
                                                                    </Border.Background>
                                                                </Border>
                                                            </DataTemplate>
                                                        </GridView.ItemTemplate>
                                                    </GridView>
                                                </PivotItem.Content>
                                            </PivotItem>
                                            <PivotItem x:Name="ChannelsPivotItem"
                                                       AutomationProperties.Name="Channels">
                                                <PivotItem.Header>
                                                    <FontIcon Glyph="&#xE9E9;"
                                                              Width="109" />
                                                </PivotItem.Header>
                                                <PivotItem.Content>
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="30" />
                                                            <ColumnDefinition Width="80" />
                                                            <ColumnDefinition Width="*" />
                                                        </Grid.ColumnDefinitions>
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="Auto" />
                                                            <RowDefinition Height="24" />
                                                            <RowDefinition Height="1*" />
                                                            <RowDefinition Height="1*" />
                                                            <RowDefinition Height="1*" />
                                                            <RowDefinition Height="1*" />
                                                            <!-- Note that there is an additional 12px added by the PivotItem -->
                                                            <RowDefinition Height="12" />
                                                        </Grid.RowDefinitions>
                                                        <!-- Top color model & Hex input -->
                                                        <Grid Grid.Column="0"
                                                              Grid.ColumnSpan="3"
                                                              Grid.Row="0">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="1*" />
                                                                <ColumnDefinition Width="1*" />
                                                                <ColumnDefinition Width="12" />
                                                                <ColumnDefinition Width="2*" />
                                                            </Grid.ColumnDefinitions>
                                                            <!-- Content RGB/HSV names are hard-coded in ColorPicker as well -->
                                                            <!-- ToggleButtons are styled to look like a 'SegmentedControl' or 'ButtonGroup' -->
                                                            <ToggleButton x:Name="RgbToggleButton"
                                                                          Grid.Column="0"
                                                                          Content="RGB"
                                                                          BorderBrush="{ThemeResource ToggleButtonBackgroundChecked}"
                                                                          BorderThickness="1"
                                                                          Background="Transparent"
                                                                          HorizontalAlignment="Stretch"
                                                                          IsThreeState="False"
                                                                          contract7Present:CornerRadius="2,0,0,2"/>
                                                            <ToggleButton x:Name="HsvToggleButton"
                                                                          Grid.Column="1"
                                                                          Content="HSV"
                                                                          BorderBrush="{ThemeResource ToggleButtonBackgroundChecked}"
                                                                          BorderThickness="1"
                                                                          Background="Transparent"
                                                                          HorizontalAlignment="Stretch"
                                                                          IsThreeState="False"
                                                                          contract7Present:CornerRadius="0,2,2,0" />
                                                            <Grid x:Name="HexInputGrid"
                                                                  Grid.Column="3">
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="30" />
                                                                    <ColumnDefinition Width="*" />
                                                                </Grid.ColumnDefinitions>
                                                                <Border Grid.Column="0"
                                                                        Height="32"
                                                                        Background="{ThemeResource TextBoxDisabledBackgroundThemeBrush}"
                                                                        BorderBrush="{ThemeResource TextControlBorderBrush}"
                                                                        BorderThickness="1,1,0,1"
                                                                        CornerRadius="2,0,0,2">
                                                                    <TextBlock Foreground="{ThemeResource TextBoxDisabledForegroundThemeBrush}"
                                                                               FontWeight="SemiBold"
                                                                               Text="#"
                                                                               HorizontalAlignment="Center"
                                                                               VerticalAlignment="Center" />
                                                                </Border>
                                                                <!-- Name must NOT match what is in ColorPicker 'HexTextBox' -->
                                                                <TextBox x:Name="HexInputTextBox"
                                                                         Style="{StaticResource InputTextBoxStyle}"
                                                                         AutomationProperties.Name="Hexadecimal Color Input"
                                                                         Height="32"
                                                                         Grid.Column="1"
                                                                         HorizontalAlignment="Stretch" />
                                                            </Grid>
                                                        </Grid>
                                                        <!-- Color channel editing controls -->
                                                        <!-- Channel 1 RGB:Red HSV:Hue -->
                                                        <Border Grid.Column="0"
                                                                Grid.Row="2"
                                                                Height="{Binding ElementName=Channel1TextBox, Path=ActualHeight}"
                                                                Background="{ThemeResource TextBoxDisabledBackgroundThemeBrush}"
                                                                BorderBrush="{ThemeResource TextControlBorderBrush}"
                                                                BorderThickness="1,1,0,1"
                                                                CornerRadius="2,0,0,2"
                                                                VerticalAlignment="Center">
                                                            <TextBlock x:Name="Channel1TextBlock"
                                                                       Foreground="{ThemeResource TextBoxDisabledForegroundThemeBrush}"
                                                                       FontWeight="SemiBold"
                                                                       Text="R"
                                                                       HorizontalAlignment="Center"
                                                                       VerticalAlignment="Center" />
                                                        </Border>
                                                        <TextBox x:Name="Channel1TextBox"
                                                                 Grid.Column="1"
                                                                 Grid.Row="2"
                                                                 Style="{StaticResource InputTextBoxStyle}"
                                                                 AutomationProperties.Name="Red Channel"
                                                                 VerticalAlignment="Center" />
                                                        <controls:ColorPickerButtonSlider x:Name="Channel1Slider"
                                                                                          Grid.Column="2"
                                                                                          Grid.Row="2"
                                                                                          AutomationProperties.Name="Red Channel"
                                                                                          Style="{StaticResource ColorPickerButtonSliderStyle}"
                                                                                          BorderBrush="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Color, Converter={StaticResource ContrastBrush}, ConverterParameter={ThemeResource TextControlForeground}}"
                                                                                          Margin="12,0,0,0"
                                                                                          HorizontalAlignment="Stretch"
                                                                                          VerticalAlignment="Center" />
                                                        <!-- Channel 2 RGB:Green HSV:Saturation -->
                                                        <Border Grid.Column="0"
                                                                Grid.Row="3"
                                                                Height="{Binding ElementName=Channel2TextBox, Path=ActualHeight}"
                                                                Background="{ThemeResource TextBoxDisabledBackgroundThemeBrush}"
                                                                BorderBrush="{ThemeResource TextControlBorderBrush}"
                                                                BorderThickness="1,1,0,1"
                                                                CornerRadius="2,0,0,2"
                                                                VerticalAlignment="Center">
                                                            <TextBlock x:Name="Channel2TextBlock"
                                                                       Foreground="{ThemeResource TextBoxDisabledForegroundThemeBrush}"
                                                                       FontWeight="SemiBold"
                                                                       Text="G"
                                                                       HorizontalAlignment="Center"
                                                                       VerticalAlignment="Center" />
                                                        </Border>
                                                        <TextBox x:Name="Channel2TextBox"
                                                                 Grid.Column="1"
                                                                 Grid.Row="3"
                                                                 Style="{StaticResource InputTextBoxStyle}"
                                                                 AutomationProperties.Name="Green Channel"
                                                                 VerticalAlignment="Center" />
                                                        <controls:ColorPickerButtonSlider x:Name="Channel2Slider"
                                                                                          Grid.Column="2"
                                                                                          Grid.Row="3"
                                                                                          AutomationProperties.Name="Green Channel"
                                                                                          Style="{StaticResource ColorPickerButtonSliderStyle}"
                                                                                          BorderBrush="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Color, Converter={StaticResource ContrastBrush}, ConverterParameter={ThemeResource TextControlForeground}}"
                                                                                          Margin="12,0,0,0"
                                                                                          HorizontalAlignment="Stretch"
                                                                                          VerticalAlignment="Center" />
                                                        <!-- Channel 3 RGB:Blue HSV:Value -->
                                                        <Border Grid.Column="0"
                                                                Grid.Row="4"
                                                                Height="{Binding ElementName=Channel3TextBox, Path=ActualHeight}"
                                                                Background="{ThemeResource TextBoxDisabledBackgroundThemeBrush}"
                                                                BorderBrush="{ThemeResource TextControlBorderBrush}"
                                                                BorderThickness="1,1,0,1"
                                                                CornerRadius="2,0,0,2"
                                                                VerticalAlignment="Center">
                                                            <TextBlock x:Name="Channel3TextBlock"
                                                                       Foreground="{ThemeResource TextBoxDisabledForegroundThemeBrush}"
                                                                       FontWeight="SemiBold"
                                                                       Text="B"
                                                                       HorizontalAlignment="Center"
                                                                       VerticalAlignment="Center" />
                                                        </Border>
                                                        <TextBox x:Name="Channel3TextBox"
                                                                 Grid.Column="1"
                                                                 Grid.Row="4"
                                                                 Style="{StaticResource InputTextBoxStyle}"
                                                                 AutomationProperties.Name="Blue Channel"
                                                                 VerticalAlignment="Center" />
                                                        <controls:ColorPickerButtonSlider x:Name="Channel3Slider"
                                                                                          Grid.Column="2"
                                                                                          Grid.Row="4"
                                                                                          AutomationProperties.Name="Blue Channel"
                                                                                          Style="{StaticResource ColorPickerButtonSliderStyle}"
                                                                                          BorderBrush="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Color, Converter={StaticResource ContrastBrush}, ConverterParameter={ThemeResource TextControlForeground}}"
                                                                                          Margin="12,0,0,0"
                                                                                          HorizontalAlignment="Stretch"
                                                                                          VerticalAlignment="Center" />
                                                        <!-- Alpha channel -->
                                                        <Border x:Name="AlphaChannelBorder"
                                                                Grid.Column="0"
                                                                Grid.Row="5"
                                                                Height="{Binding ElementName=AlphaChannelTextBox, Path=ActualHeight}"
                                                                Background="{ThemeResource TextBoxDisabledBackgroundThemeBrush}"
                                                                BorderBrush="{ThemeResource TextControlBorderBrush}"
                                                                BorderThickness="1,1,0,1"
                                                                CornerRadius="2,0,0,2"
                                                                VerticalAlignment="Center">
                                                            <TextBlock x:Name="AlphaChannelTextBlock"
                                                                       Foreground="{ThemeResource TextBoxDisabledForegroundThemeBrush}"
                                                                       FontWeight="SemiBold"
                                                                       Text="A"
                                                                       HorizontalAlignment="Center"
                                                                       VerticalAlignment="Center" />
                                                        </Border>
                                                        <TextBox x:Name="AlphaChannelTextBox"
                                                                 Grid.Column="1"
                                                                 Grid.Row="5"
                                                                 Style="{StaticResource InputTextBoxStyle}"
                                                                 AutomationProperties.Name="Alpha Channel"
                                                                 VerticalAlignment="Center" />
                                                        <controls:ColorPickerButtonSlider x:Name="AlphaChannelSlider"
                                                                                          Grid.Column="2"
                                                                                          Grid.Row="5"
                                                                                          AutomationProperties.Name="Alpha Channel"
                                                                                          Style="{StaticResource ColorPickerButtonSliderStyle}"
                                                                                          BorderBrush="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Color, Converter={StaticResource ContrastBrush}, ConverterParameter={ThemeResource TextControlForeground}}"
                                                                                          Margin="12,0,0,0"
                                                                                          HorizontalAlignment="Stretch"
                                                                                          VerticalAlignment="Center" />
                                                    </Grid>
                                                </PivotItem.Content>
                                            </PivotItem>
                                        </Pivot>
                                        <Grid x:Name="ColorPreviewGrid"
                                              Grid.Row="2"
                                              Height="50"
                                              Margin="12,0,12,12">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="Auto" />
                                            </Grid.ColumnDefinitions>
                                            <Grid Grid.Column="0"
                                                  Height="40"
                                                  Width="100"
                                                  VerticalAlignment="Center">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Border x:Name="CheckeredBackground2Border"
                                                        Grid.Column="0"
                                                        Grid.ColumnSpan="2"
                                                        HorizontalAlignment="Stretch"
                                                        VerticalAlignment="Stretch" />
                                                <Border x:Name="N2PreviewBorder"
                                                        Grid.Column="0"
                                                        CornerRadius="2,0,0,2">
                                                    <Border.Background>
                                                        <SolidColorBrush Color="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Color, Converter={StaticResource ColorToColorShade}, ConverterParameter='-2'}" />
                                                    </Border.Background>
                                                </Border>
                                                <!-- The -1 and +1 accent preview originally had a drop shadow as well.
                                                     However, due to Z-order issues with the checkered background,
                                                     shadow and preview border, it would have required it's own
                                                     checkered background. This was judged not worth the performance 
                                                     trade-off so shadows were removed. -->
                                                <Border x:Name="N1PreviewBorder"
                                                        Grid.Column="1">
                                                    <Border.Background>
                                                        <SolidColorBrush Color="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Color, Converter={StaticResource ColorToColorShade}, ConverterParameter='-1'}" />
                                                    </Border.Background>
                                                </Border>
                                            </Grid>
                                            <Grid Grid.Column="2"
                                                  Height="40"
                                                  Width="100"
                                                  VerticalAlignment="Center">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Border x:Name="CheckeredBackground4Border"
                                                        Grid.Column="0"
                                                        Grid.ColumnSpan="2"
                                                        HorizontalAlignment="Stretch"
                                                        VerticalAlignment="Stretch" />
                                                <Border x:Name="P1PreviewBorder"
                                                        Grid.Column="0">
                                                    <Border.Background>
                                                        <SolidColorBrush Color="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Color, Converter={StaticResource ColorToColorShade}, ConverterParameter='1'}" />
                                                    </Border.Background>
                                                </Border>
                                                <Border x:Name="P2PreviewBorder"
                                                        Grid.Column="1"
                                                        CornerRadius="0,2,2,0">
                                                    <Border.Background>
                                                        <SolidColorBrush Color="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Color, Converter={StaticResource ColorToColorShade}, ConverterParameter='2'}" />
                                                    </Border.Background>
                                                </Border>
                                            </Grid>
                                            <!-- Must be last for drop shadow Z-index -->
                                            <controls:DropShadowPanel Grid.Column="1"
                                                                      BlurRadius="10.0"
                                                                      ShadowOpacity="0.75"
                                                                      OffsetX="0.0"
                                                                      OffsetY="0.0"
                                                                      Color="Black"
                                                                      HorizontalContentAlignment="Stretch"
                                                                      VerticalContentAlignment="Stretch">
                                                <Grid>
                                                    <Border Background="{ThemeResource FlyoutPresenterBackground}"
                                                            CornerRadius="2"
                                                            HorizontalAlignment="Stretch"
                                                            VerticalAlignment="Stretch" />
                                                    <Border x:Name="CheckeredBackground3Border"
                                                            CornerRadius="2"
                                                            HorizontalAlignment="Stretch"
                                                            VerticalAlignment="Stretch" />
                                                    <Border x:Name="PreviewBorder"
                                                            CornerRadius="2">
                                                        <Border.Background>
                                                            <SolidColorBrush Color="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Color}" />
                                                        </Border.Background>
                                                    </Border>
                                                </Grid>
                                            </controls:DropShadowPanel>
                                        </Grid>
                                    </Grid>
                                </Flyout>
                            </Button.Flyout>
                        </Button>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <contract7NotPresent:Style TargetType="controls:ColorPickerButton"
                               BasedOn="{StaticResource BaseColorPickerButtonStyle}">
        <!-- Currently not used -->
    </contract7NotPresent:Style>

    <contract7Present:Style TargetType="controls:ColorPickerButton"
                            BasedOn="{StaticResource BaseColorPickerButtonStyle}">
        <Setter Property="CornerRadius"
                Value="2" />
    </contract7Present:Style>

</ResourceDictionary>